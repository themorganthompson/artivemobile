{"version":3,"sources":["index.js"],"names":["NativeEventEmitter","NativeModules","deviceInfoEmitter","RNDeviceInfo","isBatteryCharging","batteryLevel","powerState","getMaxMemorySync","window","performance","memory","jsHeapSizeLimit","getInstallReferrerSync","document","referrer","isAirplaneModeSync","navigator","onLine","getUserAgentSync","userAgent","isLocationEnabledSync","geolocation","getTotalMemorySync","deviceMemory","getUsedMemorySync","usedJSHeapSize","getPowerState","battery","level","charging","chargingtime","dischargingtime","lowPowerMode","batteryState","init","getBattery","addEventListener","emit","getBaseOsSync","platform","macosPlatforms","windowsPlatforms","iosPlatforms","os","indexOf","test","module","exports","getInstallReferrer","getUserAgent","isBatteryChargingSync","isCameraPresent","devices","mediaDevices","enumerateDevices","find","d","kind","isCameraPresentSync","console","log","getBatteryLevel","getBatteryLevelSync","isLocationEnabled","isAirplaneMode","getBaseOs","getTotalDiskCapacity","storage","estimate","quota","getTotalDiskCapacitySync","getFreeDiskStorage","usage","getFreeDiskStorageSync","getMaxMemory","getUsedMemory","getTotalMemory","getPowerStateSync"],"mappings":"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","sourcesContent":["import { NativeEventEmitter, NativeModules } from 'react-native';\n\nconst deviceInfoEmitter = new NativeEventEmitter(NativeModules.RNDeviceInfo);\n\nlet isBatteryCharging = false,\n  batteryLevel = -1,\n  powerState = {};\n\nconst getMaxMemorySync = () => {\n  if (window.performance && window.performance.memory) {\n    return window.performance.memory.jsHeapSizeLimit;\n  }\n  return -1;\n};\n\nconst getInstallReferrerSync = () => {\n  return document.referrer;\n};\n\nconst isAirplaneModeSync = () => {\n  return !!navigator.onLine;\n};\n\nconst getUserAgentSync = () => {\n  return window.navigator.userAgent;\n};\n\nconst isLocationEnabledSync = () => {\n  return !!navigator.geolocation;\n};\n\nconst getTotalMemorySync = () => {\n  if (navigator.deviceMemory) {\n    return navigator.deviceMemory * 1000000000;\n  }\n  return -1;\n};\n\nconst getUsedMemorySync = () => {\n  if (window.performance && window.performance.memory) {\n    return window.performance.memory.usedJSHeapSize;\n  }\n  return -1;\n};\n\nconst getPowerState = battery => {\n  const { level, charging, chargingtime, dischargingtime } = battery;\n\n  return {\n    batteryLevel: level,\n    lowPowerMode: false,\n    batteryState: level === 1 ? 'full' : charging ? 'charging' : 'unplugged',\n    chargingtime,\n    dischargingtime,\n  };\n};\n\nconst init = async () => {\n  if (navigator.getBattery) {\n    const battery = await navigator.getBattery();\n\n    isBatteryCharging = battery.charging;\n\n    battery.addEventListener('chargingchange', () => {\n      const { charging } = battery;\n\n      isBatteryCharging = charging;\n      powerState = getPowerState(battery);\n\n      deviceInfoEmitter.emit('RNDeviceInfo_powerStateDidChange', powerState);\n    });\n\n    battery.addEventListener('levelchange', () => {\n      const { level } = battery;\n\n      batteryLevel = level;\n      powerState = getPowerState(battery);\n\n      deviceInfoEmitter.emit('RNDeviceInfo_batteryLevelDidChange', level);\n      if (level < 0.2) {\n        deviceInfoEmitter.emit('RNDeviceInfo_batteryLevelIsLow', level);\n      }\n    });\n  }\n};\n\nconst getBaseOsSync = () => {\n  const userAgent = window.navigator.userAgent,\n    platform = window.navigator.platform,\n    macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\n    windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],\n    iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n\n  let os = platform;\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    os = 'Mac OS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    os = 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    os = 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    os = 'Android';\n  } else if (!os && /Linux/.test(platform)) {\n    os = 'Linux';\n  }\n\n  return os;\n};\n\ninit();\n/**\n * react-native-web empty polyfill.\n */\nmodule.exports = {\n  getInstallReferrer: async () => {\n    return getInstallReferrerSync();\n  },\n  getInstallReferrerSync,\n  getUserAgent: async () => {\n    return getUserAgentSync();\n  },\n  getUserAgentSync,\n  isBatteryCharging: async () => {\n    if (navigator.getBattery) {\n      const battery = await navigator.getBattery();\n      return battery.level;\n    }\n    return false;\n  },\n  isBatteryChargingSync: async () => {\n    return isBatteryCharging;\n  },\n  isCameraPresent: async () => {\n    if (navigator.getBattery) {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      return !!devices.find(d => d.kind === 'videoinput');\n    }\n    return false;\n  },\n  isCameraPresentSync: async () => {\n    console.log(\n      '[react-native-device-info] isCameraPresentSync not supported - please use isCameraPresent'\n    );\n    return false;\n  },\n  getBatteryLevel: async () => {\n    if (navigator.getBattery) {\n      const battery = await navigator.getBattery();\n      return battery.level;\n    }\n    return -1;\n  },\n  getBatteryLevelSync: () => {\n    return batteryLevel;\n  },\n  isLocationEnabled: async () => {\n    return isLocationEnabledSync();\n  },\n  isLocationEnabledSync,\n  isAirplaneMode: async () => {\n    return isAirplaneModeSync();\n  },\n  isAirplaneModeSync,\n  getBaseOs: async () => {\n    return getBaseOsSync();\n  },\n  getBaseOsSync,\n  getTotalDiskCapacity: async () => {\n    if (navigator.storage && navigator.storage.estimate) {\n      const { quota } = await navigator.storage.estimate();\n      return quota;\n    }\n    return -1;\n  },\n  getTotalDiskCapacitySync: () => {\n    console.log(\n      '[react-native-device-info] getTotalDiskCapacitySync not supported - please use getTotalDiskCapacity'\n    );\n    return -1;\n  },\n  getFreeDiskStorage: async () => {\n    if (navigator.storage && navigator.storage.estimate) {\n      const { quota, usage } = await navigator.storage.estimate();\n      return quota - usage;\n    }\n    return -1;\n  },\n  getFreeDiskStorageSync: () => {\n    console.log(\n      '[react-native-device-info] getFreeDiskStorageSync not supported - please use getFreeDiskStorage'\n    );\n    return -1;\n  },\n  getMaxMemory: async () => {\n    return getMaxMemorySync();\n  },\n  getMaxMemorySync,\n  getUsedMemory: async () => {\n    return getUsedMemorySync();\n  },\n  getUsedMemorySync,\n  getTotalMemory: async () => {\n    return getTotalMemorySync();\n  },\n  getTotalMemorySync,\n  getPowerState: async () => {\n    if (navigator.getBattery) {\n      const battery = await navigator.getBattery();\n\n      return getPowerState(battery);\n    }\n    return {};\n  },\n  getPowerStateSync: () => {\n    return powerState;\n  },\n};\n"]}